<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telco Recommendation API - Documentation</title>
    <link rel="stylesheet" href="/public/styles/api-docs.css">
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">
                <h2>Telco API</h2>
                <p class="version">Version 1.0.0</p>
            </div>
            
            <nav class="nav">
                <div class="nav-section">
                    <h3>Getting Started</h3>
                    <a href="#introduction">Introduction</a>
                    <a href="#authentication">Authentication</a>
                    <a href="#base-url">Base URL</a>
                    <a href="#response-format">Response Format</a>
                </div>
                
                <div class="nav-section">
                    <h3>Endpoints</h3>
                    <a href="#auth-endpoints">Authentication</a>
                    <a href="#product-endpoints">Products</a>
                    <a href="#recommendation-endpoints">Recommendations</a>
                </div>
                
                <div class="nav-section">
                    <h3>Resources</h3>
                    <a href="#models">Data Models</a>
                    <a href="#errors">Error Codes</a>
                    <a href="#examples">Code Examples</a>
                </div>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="content">
            <!-- Header -->
            <header class="header">
                <h1>Telco Product Recommendation API</h1>
                <p class="subtitle">Complete API documentation for integrating telco product recommendations powered by Machine Learning</p>
            </header>

            <!-- Introduction -->
            <section id="introduction" class="section">
                <h2>Introduction</h2>
                <p>The Telco Recommendation API provides intelligent product recommendations for telecommunications services using hybrid machine learning algorithms. This API enables personalized offers based on user behavior, preferences, and usage patterns.</p>
                
                <div class="feature-grid">
                    <div class="feature-card">
                        <div class="feature-icon">ðŸ¤–</div>
                        <h3>ML-Powered</h3>
                        <p>Hybrid recommendation engine combining collaborative filtering and content-based approaches</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">âš¡</div>
                        <h3>Fast & Scalable</h3>
                        <p>Optimized queries with MongoDB indexing and caching strategies</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">ðŸ”’</div>
                        <h3>Secure</h3>
                        <p>JWT authentication with role-based access control</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">ðŸ“Š</div>
                        <h3>Analytics Ready</h3>
                        <p>Track user interactions and recommendation performance</p>
                    </div>
                </div>
            </section>

            <!-- Authentication -->
            <section id="authentication" class="section">
                <h2>Authentication</h2>
                <p>The API uses JWT (JSON Web Tokens) for authentication. Include the token in the Authorization header for protected endpoints.</p>
                
                <div class="code-block">
                    <div class="code-header">
                        <span>Request Header</span>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <pre><code>Authorization: Bearer YOUR_JWT_TOKEN</code></pre>
                </div>

                <div class="info-box">
                    <strong>ðŸ“Œ Note:</strong> Tokens are valid for 7 days. No need to refresh manually - just login again when expired.
                </div>
            </section>

            <!-- Base URL -->
            <section id="base-url" class="section">
                <h2>Base URL</h2>
                <div class="code-block">
                    <pre><code>https://telco-recommendation-backend-production.up.railway.app</code></pre>
                </div>
                <p>All API endpoints are relative to this base URL.</p>
            </section>

            <!-- Response Format -->
            <section id="response-format" class="section">
                <h2>Response Format</h2>
                <p>All responses follow a standardized JSON format:</p>
                
                <h3>Success Response</h3>
                <div class="code-block">
                    <div class="code-header">
                        <span>JSON</span>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <pre><code>{
  "status": "success",
  "message": "Operation completed successfully",
  "data": {
    // Response data here
  }
}</code></pre>
                </div>

                <h3>Error Response</h3>
                <div class="code-block">
                    <div class="code-header">
                        <span>JSON</span>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <pre><code>{
  "status": "error",
  "message": "Error description",
  "statusCode": 400
}</code></pre>
                </div>
            </section>

            <!-- Authentication Endpoints -->
            <section id="auth-endpoints" class="section">
                <h2>Authentication Endpoints</h2>

                <!-- Login -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method method-post">POST</span>
                        <span class="path">/api/auth/login</span>
                    </div>
                    <p class="endpoint-description">Simple login with phone number. Auto-registers new users.</p>
                    
                    <h4>Request Body</h4>
                    <div class="code-block">
                        <div class="code-header">
                            <span>JSON</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        </div>
                        <pre><code>{
  "phoneNumber": "081234567890",
  "name": "John Doe" // Optional
}</code></pre>
                    </div>

                    <h4>Response</h4>
                    <div class="code-block">
                        <pre><code>{
  "status": "success",
  "message": "Login successful",
  "data": {
    "user": {
      "id": "507f1f77bcf86cd799439011",
      "phoneNumber": "081234567890",
      "name": "John Doe",
      "role": "user"
    },
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  }
}</code></pre>
                    </div>
                </div>

                <!-- Get Profile -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method method-get">GET</span>
                        <span class="path">/api/auth/profile</span>
                        <span class="badge badge-auth">ðŸ”’ Requires Auth</span>
                    </div>
                    <p class="endpoint-description">Get current user profile.</p>
                </div>

                <!-- Update Profile -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method method-put">PUT</span>
                        <span class="path">/api/auth/profile</span>
                        <span class="badge badge-auth">ðŸ”’ Requires Auth</span>
                    </div>
                    <p class="endpoint-description">Update user profile and preferences.</p>
                </div>

                <!-- Check Phone -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method method-post">POST</span>
                        <span class="path">/api/auth/check-phone</span>
                    </div>
                    <p class="endpoint-description">Check if phone number is registered.</p>
                </div>
            </section>

            <!-- Product Endpoints -->
            <section id="product-endpoints" class="section">
                <h2>Product Endpoints</h2>

                <!-- Get All Products -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method method-get">GET</span>
                        <span class="path">/api/products</span>
                    </div>
                    <p class="endpoint-description">Get all products with pagination and filters.</p>
                    
                    <h4>Query Parameters</h4>
                    <table class="params-table">
                        <thead>
                            <tr>
                                <th>Parameter</th>
                                <th>Type</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>page</code></td>
                                <td>integer</td>
                                <td>Page number (default: 1)</td>
                            </tr>
                            <tr>
                                <td><code>limit</code></td>
                                <td>integer</td>
                                <td>Items per page (default: 10)</td>
                            </tr>
                            <tr>
                                <td><code>category</code></td>
                                <td>string</td>
                                <td>Filter by category</td>
                            </tr>
                            <tr>
                                <td><code>search</code></td>
                                <td>string</td>
                                <td>Search in name/description</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Get Categories -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method method-get">GET</span>
                        <span class="path">/api/products/categories/list</span>
                    </div>
                    <p class="endpoint-description">Get all available product categories.</p>
                </div>

                <!-- Get Popular Products -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method method-get">GET</span>
                        <span class="path">/api/products/popular/list</span>
                    </div>
                    <p class="endpoint-description">Get popular products sorted by purchase count.</p>
                </div>
            </section>

            <!-- Recommendation Endpoints -->
            <section id="recommendation-endpoints" class="section">
                <h2>Recommendation Endpoints</h2>

                <!-- Get Recommendations -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method method-get">GET</span>
                        <span class="path">/api/recommendations</span>
                        <span class="badge badge-auth">ðŸ”’ Requires Auth</span>
                    </div>
                    <p class="endpoint-description">Get personalized product recommendations powered by ML.</p>
                    
                    <h4>Query Parameters</h4>
                    <table class="params-table">
                        <thead>
                            <tr>
                                <th>Parameter</th>
                                <th>Type</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>algorithm</code></td>
                                <td>string</td>
                                <td>collaborative, content-based, hybrid (default: hybrid)</td>
                            </tr>
                            <tr>
                                <td><code>limit</code></td>
                                <td>integer</td>
                                <td>Number of recommendations (default: 5, max: 20)</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Get Recommendation History -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method method-get">GET</span>
                        <span class="path">/api/recommendations/history</span>
                        <span class="badge badge-auth">ðŸ”’ Requires Auth</span>
                    </div>
                    <p class="endpoint-description">Get user's recommendation history with pagination.</p>
                </div>

                <!-- Track Interaction -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method method-post">POST</span>
                        <span class="path">/api/recommendations/{id}/interaction</span>
                        <span class="badge badge-auth">ðŸ”’ Requires Auth</span>
                    </div>
                    <p class="endpoint-description">Track user interaction with recommended product.</p>
                </div>
            </section>

            <!-- Error Codes -->
            <section id="errors" class="section">
                <h2>Error Codes</h2>
                <table class="params-table">
                    <thead>
                        <tr>
                            <th>Status Code</th>
                            <th>Error Type</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>400</code></td>
                            <td>Bad Request</td>
                            <td>Invalid request payload or parameters</td>
                        </tr>
                        <tr>
                            <td><code>401</code></td>
                            <td>Unauthorized</td>
                            <td>Missing or invalid JWT token</td>
                        </tr>
                        <tr>
                            <td><code>403</code></td>
                            <td>Forbidden</td>
                            <td>Insufficient permissions</td>
                        </tr>
                        <tr>
                            <td><code>404</code></td>
                            <td>Not Found</td>
                            <td>Resource not found</td>
                        </tr>
                        <tr>
                            <td><code>500</code></td>
                            <td>Internal Server Error</td>
                            <td>Server-side error occurred</td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <!-- Code Examples -->
            <section id="examples" class="section">
                <h2>Code Examples</h2>

                <h3>JavaScript (Fetch API)</h3>
                <div class="code-block">
                    <div class="code-header">
                        <span>JavaScript</span>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <pre><code>// Login
const login = async (phoneNumber, name) => {
  const response = await fetch('https://your-api.com/api/auth/login', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ phoneNumber, name })
  });
  return await response.json();
};

// Get Recommendations
const getRecommendations = async (token) => {
  const response = await fetch('https://your-api.com/api/recommendations?limit=5', {
    headers: { 'Authorization': `Bearer ${token}` }
  });
  return await response.json();
};</code></pre>
                </div>
            </section>

            <!-- Footer -->
            <footer style="text-align: center; padding: 2rem 0; color: #94a3b8; border-top: 1px solid #e2e8f0; margin-top: 3rem;">
                <p>Made with by Muhammad Ariq Fadhil (A25-CS024)</p>
                <p style="margin-top: 0.5rem;">Telco Recommendation System - Capstone Project</p>
            </footer>
        </main>
    </div>

    <script>
        function copyCode(button) {
            const codeBlock = button.closest('.code-block');
            const code = codeBlock.querySelector('code').textContent;
            
            navigator.clipboard.writeText(code).then(() => {
                const originalText = button.textContent;
                button.textContent = 'Copied!';
                button.style.backgroundColor = '#10b981';
                
                setTimeout(() => {
                    button.textContent = originalText;
                    button.style.backgroundColor = '';
                }, 2000);
            });
        }

        // Smooth scrolling for navigation links
        document.querySelectorAll('.nav a').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });
    </script>
</body>
</html>